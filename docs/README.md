# 轻量级 Kubernetes 重调度器 - 详细文档

欢迎使用轻量级 Kubernetes 重调度器！这是一个专为初学者设计的简化版重调度器，帮助您理解 Kubernetes 重调度的核心概念和实现。

## 📖 文档目录

- [快速开始](./quick-start.md) - 5分钟快速部署和使用
- [架构设计](./architecture.md) - 详细的架构说明
- [配置指南](./configuration.md) - 完整的配置参数说明
- [策略详解](./strategies.md) - 各种重调度策略的工作原理
- [部署指南](./deployment.md) - 多种部署方式详解
- [故障排除](./troubleshooting.md) - 常见问题和解决方案
- [开发指南](./development.md) - 如何参与开发和扩展

## 🎯 什么是重调度器？  

重调度器是一个用于优化 Kubernetes 集群中 Pod 分布的工具。当集群状态发生变化时（如节点资源利用率不均、Pod 失败等），重调度器会主动识别并重新平衡 Pod 的分布，以提高集群的整体效率和稳定性。

### 主要功能

1. **自动清理失败的 Pod** - 移除长时间处于失败状态的 Pod
2. **平衡节点资源利用率** - 将 Pod 从高负载节点迁移到低负载节点
3. **清理重复的 Pod** - 移除同一节点上的重复 Pod 实例
4. **智能驱逐限制** - 防止过度驱逐影响服务稳定性

## 🚀 核心特性

### 简化设计
- 去除复杂的插件系统，采用直观的策略模式
- 清晰的代码结构，易于理解和扩展
- 详细的中文注释和文档

### 生产就绪
- 完整的错误处理和日志记录
- 支持 DryRun 模式进行安全测试
- 灵活的驱逐限制保护机制
- 支持多种部署方式（Deployment、CronJob）

### 易于使用
- YAML 配置文件，简单直观
- 一键部署脚本
- 详细的监控和统计信息
- 完整的 RBAC 权限配置

## 🏗️ 系统架构

```
┌─────────────────────────────────────────────────────────┐
│                    轻量级重调度器                          │
├─────────────────────────────────────────────────────────┤
│                    主调度器                             │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐    │
│  │  配置管理    │  │  节点发现    │  │  统计监控    │    │
│  └─────────────┘  └─────────────┘  └─────────────┘    │
├─────────────────────────────────────────────────────────┤
│                    策略引擎                             │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐    │
│  │  失败Pod     │  │  资源平衡    │  │  重复清理    │    │
│  │  清理策略    │  │    策略     │  │    策略     │    │
│  └─────────────┘  └─────────────┘  └─────────────┘    │
├─────────────────────────────────────────────────────────┤
│                    驱逐引擎                             │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐    │
│  │  安全检查    │  │  限制控制    │  │  实际驱逐    │    │
│  └─────────────┘  └─────────────┘  └─────────────┘    │
├─────────────────────────────────────────────────────────┤
│                 Kubernetes API                         │
└─────────────────────────────────────────────────────────┘
```

## 📊 工作流程

1. **发现阶段** - 扫描集群中的所有节点和 Pod
2. **分析阶段** - 根据配置的策略分析集群状态
3. **决策阶段** - 确定需要驱逐的 Pod 列表
4. **执行阶段** - 安全地驱逐选定的 Pod
5. **监控阶段** - 记录统计信息并等待下一个周期

## 🎯 使用场景

### 开发和测试环境
- 自动清理失败的测试 Pod
- 优化资源利用率，降低成本
- 学习 Kubernetes 重调度概念

### 生产环境
- 提高集群稳定性和效率
- 自动处理节点故障后的 Pod 重分布
- 优化资源利用率，提高集群密度

### 学习和教育
- 理解 Kubernetes 调度和重调度机制
- 学习 Go 语言 Kubernetes 开发
- 了解云原生最佳实践

## 📈 性能指标

| 指标 | 说明 |
|------|------|
| 驱逐延迟 | 从决策到完成驱逐的时间 |
| 成功率 | 驱逐成功的 Pod 比例 |
| 资源影响 | 对集群资源的影响程度 |
| 错误率 | 驱逐失败的比例 |

## 🔒 安全考虑

- **最小权限原则** - 只申请必要的 RBAC 权限
- **安全检查** - 多重检查确保不驱逐关键 Pod
- **优雅驱逐** - 使用 Kubernetes 标准驱逐 API
- **回滚保护** - DryRun 模式确保安全性

## 🤝 社区和支持

- **GitHub Issues** - 报告问题和请求功能
- **文档贡献** - 改进文档和示例
- **代码贡献** - 提交补丁和新功能

## 📚 相关资源

- [Kubernetes 官方文档](https://kubernetes.io/docs/)
- [Pod 驱逐 API](https://kubernetes.io/docs/concepts/scheduling-eviction/api-eviction/)
- [调度器设计](https://kubernetes.io/docs/concepts/scheduling-eviction/kube-scheduler/)

---

**下一步**: 阅读 [快速开始指南](./quick-start.md) 立即开始使用！
